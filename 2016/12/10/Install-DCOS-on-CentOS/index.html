<!DOCTYPE html>
<html>
    <head>
    <!-- Title -->
    
    <title>
        Install DCOS on CentOS | 卜将就
    </title>
    
    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/bu.png">
    <link rel="icon" sizes="192x192" href="/img/bu.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">
    
    <!-- Meta & INfo -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Bubu">
    <meta name="description" content="北邮学子，专注Python爬虫爬坑中，坐标帝都。">
    <meta name="keywords" content="null">
    
    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">
    
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="卜将就">
    
    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://www.bububupt.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Install DCOS on CentOS | 卜将就">
    <meta property="og:description" content="北邮学子，专注Python爬虫爬坑中，坐标帝都。">
    
     <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">
        
        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->
    
    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
	body, html{
		font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
	}
	
    a{
        color: #00838F
    }
    
    .mdl-card__media,
    #search-label,
    #search-form-label:after,
    #scheme-Paradox .hot_tags-count,
    #scheme-Paradox .sidebar_archives-count,
    #scheme-Paradox .sidebar-colored .sidebar-header,
    #scheme-Paradox .sidebar-colored .sidebar-badge{
        background-color: #0097A7 !important
    }
    
	/* Sidebar User Drop Down Menu Text Color */
	#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus{
        color: #0097A7 !important
    }
    
    #post_entry-right-info,
    .sidebar-colored .sidebar-nav li:hover > a,
    .sidebar-colored .sidebar-nav li:hover > a i,
    .sidebar-colored .sidebar-nav li > a:hover,
    .sidebar-colored .sidebar-nav li > a:hover i,
    .sidebar-colored .sidebar-nav li > a:focus i,
    .sidebar-colored .sidebar-nav > .open > a,
    .sidebar-colored .sidebar-nav > .open > a:hover,
    .sidebar-colored .sidebar-nav > .open > a:focus,
    #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a{
        color: #0097A7 !important
    }
    
    .toTop{
        background: #757575 !important
    }
		
	.material-layout .material-post>.material-nav,
	.material-layout .material-index>.material-nav,
	.material-nav a{
		color: #757575;
	}
		
	#scheme-Paradox .MD-burger-layer {
		background-color: #757575;
	}

	#scheme-Paradox #post-toc-trigger-btn{
		color: #757575;
	}
	
	.post-toc a:hover{
		color: #00838F;
		text-decoration: underline;
	}
</style>


<!-- Theme Background Related-->

    <style>
        body{
            background-color: #F5F5F5
        }
		
		/* blog_info bottom background */
        #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
            background-color: #fff;
        }
    </style>




<!-- Fade Effect -->

    <style>
        .fade {
            transition: all 800ms linear;
            -webkit-transform: translate3d(0,0,0);
            -moz-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            opacity: 1;
        }

        .fade.out{
            opacity: 0;
        }
    </style>

	<script src="/js/jquery.min.js"></script>
	
	<link rel="stylesheet" href="/css/highlight/solarized-white.css">
	
	<!-- UC Browser Compatible-->
	<script>
		var agent = navigator.userAgent.toLowerCase();
		if(agent.indexOf('ucbrowser')>0) {
			document.write('<link rel="stylesheet" href="/css/uc.css">');
		   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
		}
	</script>
    
    <!-- Custom Head -->
    
</head>
	
	

    <body id="scheme-Paradox">

		
        <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
				
			
			
            <!-- Main Container -->
            <main class="material-layout__content" id="main">
				
                <!-- Top Anchor -->
                <div id="top"></div>
				
				
                <!-- Hamburger Button -->
                <button class="MD-burger-icon sidebar-toggle">
                    <span class="MD-burger-layer"></span>
                </button>
				
				
                
	<!-- Back Button -->
<!--
	<div class="material-back" id="backhome-div" tabindex="0">
		<a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="#" onclick="window.history.back();return false;" target="_self" role="button" data-upgraded=",MaterialButton,MaterialRipple">
			<i class="material-icons" role="presentation">arrow_back</i>
			<span class="mdl-button__ripple-container">
				<span class="mdl-ripple"></span>
			</span>
		</a>
	</div>			
-->
	<!-- Left aligned menu below button -->
	<button id="post-toc-trigger-btn"
			class="mdl-button mdl-js-button mdl-button--icon">
	  <i class="material-icons">format_list_numbered</i>
	</button>

	<ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect"
		for="post-toc-trigger-btn">
			
			<ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#准备"><span class="post-toc-number">1.</span> <span class="post-toc-text">准备</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#母盘的制作"><span class="post-toc-number">2.</span> <span class="post-toc-text">母盘的制作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#登录母盘所在的系统"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">登录母盘所在的系统</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">安装</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#可选安装，一些辅助工具，更好的管理Linux系统"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">可选安装，一些辅助工具，更好的管理Linux系统</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用OverlayFS-参考https-dcos-io-docs-1-7-administration-installing-custom-system-requirements-install-docker-centos-recommendations"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">使用OverlayFS,参考https://dcos.io/docs/1.7/administration/installing/custom/system-requirements/install-docker-centos/#recommendations</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#检查overlay是否使用成功"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">检查overlay是否使用成功</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装Docker"><span class="post-toc-number">2.2.4.</span> <span class="post-toc-text">安装Docker</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#生成公私钥"><span class="post-toc-number">2.2.5.</span> <span class="post-toc-text">生成公私钥</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#虚拟机设置"><span class="post-toc-number">3.</span> <span class="post-toc-text">虚拟机设置</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#安装-1"><span class="post-toc-number">4.</span> <span class="post-toc-text">安装</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#将下载好的dcos-generate-config-sh复制到引导节点"><span class="post-toc-number">4.0.1.</span> <span class="post-toc-text">将下载好的dcos_generate_config.sh复制到引导节点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#登录引导节点"><span class="post-toc-number">4.0.2.</span> <span class="post-toc-text">登录引导节点</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#用CLI方式安装"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">用CLI方式安装</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建genconf目录"><span class="post-toc-number">4.1.1.</span> <span class="post-toc-text">创建genconf目录</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建ip-detect-sh脚本，用于探测ip"><span class="post-toc-number">4.1.2.</span> <span class="post-toc-text">创建ip-detect.sh脚本，用于探测ip</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建集群配置文件"><span class="post-toc-number">4.1.3.</span> <span class="post-toc-text">创建集群配置文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#复制私钥"><span class="post-toc-number">4.1.4.</span> <span class="post-toc-text">复制私钥</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#正式安装"><span class="post-toc-number">4.1.5.</span> <span class="post-toc-text">正式安装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#备份安装目录"><span class="post-toc-number">4.1.6.</span> <span class="post-toc-text">备份安装目录</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#用GUI方式安装"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">用GUI方式安装</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#访问"><span class="post-toc-number">5.</span> <span class="post-toc-text">访问</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#常见问题"><span class="post-toc-number">6.</span> <span class="post-toc-text">常见问题</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#添加Agent-nodes"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">添加Agent nodes</span></a></li></ol></li></ol>
		
<!--			<li class="mdl-menu__item">Some Action</li>-->
	</ul>


<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">
		
        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
	<!-- Paradox Post Header -->
	
		
			<!-- Random Thumbnail -->
			<div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
				<script>
    
    var randomNum;
    randomNum = Math.floor(Math.random() * 5 + 1);
    
    $(".post_thumbnail-random").css('background-image', 'url(' + '/img/random/' + randomNum + '.png' + ')');
    
</script>

		
	
        <p class="article-headline-p">
            Install DCOS on CentOS
        </p>
    </div>

	

				
				
					<!-- Paradox Post Info -->
					<div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">
    
    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/images/1.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Bubu</strong>
        <span>12月 10, 2016</span>
    </div>
    
    <div class="section-spacer"></div>
	
    <!-- Favorite -->
<!--
    <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
        <i class="material-icons" role="presentation">favorite</i>
        <span class="visuallyhidden">favorites</span>
    </button>
-->
    
    <!-- Tags (bookmark) -->
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/linux/">linux</a>
    </ul>
    
    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    
    
    
    <!-- Busuanzi Views -->
    <a class="post_share-link" href="#">
        <li class="mdl-menu__item">
            <span id="busuanzi_container_page_pv">
                <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
            </span>
        </li>
    </a>
    
    
    <!-- Share Twitter -->
    <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Install DCOS on CentOS&url=http://www.bububupt.com//2016/12/10/Install-DCOS-on-CentOS/index.html&via=Bubu" target="_blank">
        <li class="mdl-menu__item">
            分享到 Twitter
        </li>
    </a>
    
    <!-- Share Google+ -->
    <a class="post_share-link" href="https://plus.google.com/share?url=http://www.bububupt.com//2016/12/10/Install-DCOS-on-CentOS/index.html" target="_blank">
        <li class="mdl-menu__item">
            分享到 Google+
        </li>
    </a>
    
    <!-- Share Weibo -->
    <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Install DCOS on CentOS&url=http://www.bububupt.com//2016/12/10/Install-DCOS-on-CentOS/index.html&pic=&searchPic=false&style=simple" target="_blank">
        <li class="mdl-menu__item">
            分享到微博
        </li>
    </a>
</ul>
</div>
				

                <!-- Post Content -->
                <div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out">
	
		<h1 id="&#x51C6;&#x5907;"><a href="#&#x51C6;&#x5907;" class="headerlink" title="&#x51C6;&#x5907;"></a>&#x51C6;&#x5907;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://centos.ustc.edu.cn/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1511.iso</div><div class="line">https://downloads.dcos.io/dcos/EarlyAccess/dcos_generate_config.sh(&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;&#x4E0B;&#x8F7D;&#x6BD4;&#x8F83;&#x6162;&#xFF0C;&#x53EF;&#x4EE5;&#x53BB;http://pan.baidu.com/s/1pKHSNPp&#x4E0B;&#x8F7D;)</div></pre></td></tr></table></figure>
<h1 id="&#x6BCD;&#x76D8;&#x7684;&#x5236;&#x4F5C;"><a href="#&#x6BCD;&#x76D8;&#x7684;&#x5236;&#x4F5C;" class="headerlink" title="&#x6BCD;&#x76D8;&#x7684;&#x5236;&#x4F5C;"></a>&#x6BCD;&#x76D8;&#x7684;&#x5236;&#x4F5C;</h1><p>&#x7528;VirtualBox&#x6216;&#x8005;VMware&#x5B89;&#x88C5;&#xFF0C;&#x786C;&#x4EF6;&#x914D;&#x7F6E;&#x63A8;&#x8350;&#x4E3A;&#xFF1A;2G&#x5185;&#x5B58;&#xFF0C;128G&#x786C;&#x76D8;&#x3002;<br>&#x5B89;&#x88C5;CentOS-7-x86_64-Minimal-1511.iso&#xFF0C;&#x65F6;&#x533A;&#x6700;&#x597D;&#x9009;&#x62E9;Asia/Shanghai&#x3002;&#x4E4B;&#x540E;</p>
<h2 id="&#x767B;&#x5F55;&#x6BCD;&#x76D8;&#x6240;&#x5728;&#x7684;&#x7CFB;&#x7EDF;"><a href="#&#x767B;&#x5F55;&#x6BCD;&#x76D8;&#x6240;&#x5728;&#x7684;&#x7CFB;&#x7EDF;" class="headerlink" title="&#x767B;&#x5F55;&#x6BCD;&#x76D8;&#x6240;&#x5728;&#x7684;&#x7CFB;&#x7EDF;"></a>&#x767B;&#x5F55;&#x6BCD;&#x76D8;&#x6240;&#x5728;&#x7684;&#x7CFB;&#x7EDF;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh root@192.168.1.x</div></pre></td></tr></table></figure>
<h2 id="&#x5B89;&#x88C5;"><a href="#&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo yum upgrade --assumeyes --tolerant</div><div class="line">sudo yum update --assumeyes</div><div class="line">sudo yum install -y tar xz unzip curl ipset git</div></pre></td></tr></table></figure>
<h3 id="&#x53EF;&#x9009;&#x5B89;&#x88C5;&#xFF0C;&#x4E00;&#x4E9B;&#x8F85;&#x52A9;&#x5DE5;&#x5177;&#xFF0C;&#x66F4;&#x597D;&#x7684;&#x7BA1;&#x7406;Linux&#x7CFB;&#x7EDF;"><a href="#&#x53EF;&#x9009;&#x5B89;&#x88C5;&#xFF0C;&#x4E00;&#x4E9B;&#x8F85;&#x52A9;&#x5DE5;&#x5177;&#xFF0C;&#x66F4;&#x597D;&#x7684;&#x7BA1;&#x7406;Linux&#x7CFB;&#x7EDF;" class="headerlink" title="&#x53EF;&#x9009;&#x5B89;&#x88C5;&#xFF0C;&#x4E00;&#x4E9B;&#x8F85;&#x52A9;&#x5DE5;&#x5177;&#xFF0C;&#x66F4;&#x597D;&#x7684;&#x7BA1;&#x7406;Linux&#x7CFB;&#x7EDF;"></a>&#x53EF;&#x9009;&#x5B89;&#x88C5;&#xFF0C;&#x4E00;&#x4E9B;&#x8F85;&#x52A9;&#x5DE5;&#x5177;&#xFF0C;&#x66F4;&#x597D;&#x7684;&#x7BA1;&#x7406;Linux&#x7CFB;&#x7EDF;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo yum -y install epel-release</div><div class="line">sudo yum install -y htop net-tools bash-completion</div></pre></td></tr></table></figure>
<h3 id="&#x4F7F;&#x7528;OverlayFS-&#x53C2;&#x8003;https-dcos-io-docs-1-7-administration-installing-custom-system-requirements-install-docker-centos-recommendations"><a href="#&#x4F7F;&#x7528;OverlayFS-&#x53C2;&#x8003;https-dcos-io-docs-1-7-administration-installing-custom-system-requirements-install-docker-centos-recommendations" class="headerlink" title="&#x4F7F;&#x7528;OverlayFS,&#x53C2;&#x8003;https://dcos.io/docs/1.7/administration/installing/custom/system-requirements/install-docker-centos/#recommendations"></a>&#x4F7F;&#x7528;OverlayFS,&#x53C2;&#x8003;<a href="https://dcos.io/docs/1.7/administration/installing/custom/system-requirements/install-docker-centos/#recommendations" target="_blank" rel="external">https://dcos.io/docs/1.7/administration/installing/custom/system-requirements/install-docker-centos/#recommendations</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">sudo tee /etc/modules-load.d/overlay.conf &lt;&lt;-&apos;EOF&apos;</div><div class="line">overlay</div><div class="line">EOF</div><div class="line"></div><div class="line">sudo reboot</div><div class="line"></div><div class="line">ssh root@192.168.1.x</div></pre></td></tr></table></figure>
<h3 id="&#x68C0;&#x67E5;overlay&#x662F;&#x5426;&#x4F7F;&#x7528;&#x6210;&#x529F;"><a href="#&#x68C0;&#x67E5;overlay&#x662F;&#x5426;&#x4F7F;&#x7528;&#x6210;&#x529F;" class="headerlink" title="&#x68C0;&#x67E5;overlay&#x662F;&#x5426;&#x4F7F;&#x7528;&#x6210;&#x529F;"></a>&#x68C0;&#x67E5;overlay&#x662F;&#x5426;&#x4F7F;&#x7528;&#x6210;&#x529F;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ssh root@192.168.1.x</div><div class="line">lsmod | grep overlay #&#x663E;&#x793A;overlay&#x8868;&#x793A;&#x6210;&#x529F;</div></pre></td></tr></table></figure>
<h3 id="&#x5B89;&#x88C5;Docker"><a href="#&#x5B89;&#x88C5;Docker" class="headerlink" title="&#x5B89;&#x88C5;Docker"></a>&#x5B89;&#x88C5;Docker</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">sudo tee /etc/yum.repos.d/docker.repo &lt;&lt;-&apos;EOF&apos;</div><div class="line">[dockerrepo]</div><div class="line">name=Docker Repository</div><div class="line">baseurl=https://yum.dockerproject.org/repo/main/centos/$releasever/</div><div class="line">enabled=1</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=https://yum.dockerproject.org/gpg</div><div class="line">EOF</div><div class="line"></div><div class="line">sudo mkdir -p /etc/systemd/system/docker.service.d &amp;&amp; sudo tee /etc/systemd/system/docker.service.d/override.conf &lt;&lt;- EOF</div><div class="line">[Service]</div><div class="line">ExecStart=</div><div class="line">ExecStart=/usr/bin/docker daemon --storage-driver=overlay -H fd://</div><div class="line">EOF</div><div class="line"></div><div class="line">sudo yum install --assumeyes --tolerant docker-engine</div><div class="line">sudo systemctl start docker</div><div class="line">sudo systemctl enable docker</div></pre></td></tr></table></figure>
<h3 id="&#x751F;&#x6210;&#x516C;&#x79C1;&#x94A5;"><a href="#&#x751F;&#x6210;&#x516C;&#x79C1;&#x94A5;" class="headerlink" title="&#x751F;&#x6210;&#x516C;&#x79C1;&#x94A5;"></a>&#x751F;&#x6210;&#x516C;&#x79C1;&#x94A5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sudo ssh-keygen #&#x4E00;&#x8DEF;&#x56DE;&#x8F66;&#x5C31;&#x597D;</div><div class="line">sudo cp ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys #&#x5C06;&#x516C;&#x94A5;&#x6DFB;&#x52A0;&#x5230;~/.ssh/authorized_keys&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x79C1;&#x94A5;~/.ssh/id_rsa&#x8BBF;&#x95EE;&#x8BE5;&#x4E3B;&#x673A;</div><div class="line">sudo cat ~/.ssh/id_rsa #&#x53EF;&#x67E5;&#x770B;&#x79C1;&#x94A5;,DCOS GUI&#x5B89;&#x88C5;&#x7684;&#x65F6;&#x5019;&#x7528;&#x5F97;&#x7740;</div><div class="line">sudo yum clean packages</div><div class="line"></div><div class="line">sudo reboot</div></pre></td></tr></table></figure>
<p>&#x5230;&#x6B64;&#xFF0C;&#x6BCD;&#x76D8;&#x5B89;&#x88C5;&#x5236;&#x4F5C;&#x5B8C;&#x6210;&#x3002;&#x5EFA;&#x8BAE;&#x7ED9;&#x6BCD;&#x76D8;&#x62CD;&#x4E2A;&#x5FEB;&#x7167;&#xFF08;VirtualBox&#x7528;Ctrl + Shift + s&#xFF0C;&#x586B;&#x5199;&#x4E2A;&#x5FEB;&#x7167;&#x540D;&#x79F0;&#xFF09;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E8E;&#x540E;&#x9762;&#x5B89;&#x88C5;&#x5931;&#x8D25;&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x5FEB;&#x901F;&#x56DE;&#x9000;&#x5230;&#x5F53;&#x524D;&#x7248;&#x672C;&#x3002;</p>
<h1 id="&#x865A;&#x62DF;&#x673A;&#x8BBE;&#x7F6E;"><a href="#&#x865A;&#x62DF;&#x673A;&#x8BBE;&#x7F6E;" class="headerlink" title="&#x865A;&#x62DF;&#x673A;&#x8BBE;&#x7F6E;"></a>&#x865A;&#x62DF;&#x673A;&#x8BBE;&#x7F6E;</h1><p>&#x5C06;&#x521B;&#x5EFA;&#x597D;&#x7684;&#x6BCD;&#x76D8;&#x590D;&#x5236;&#x51FA;&#x81F3;&#x5C11;5&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x51FA;&#x6765;&#xFF0C;&#x547D;&#x540D;&#x5982;&#x4E0B;<br>&#x5F15;&#x5BFC;&#x8282;&#x70B9;1&#x4E2A;&#xFF1A;Bootstrap<br>&#x4E3B;&#x8282;&#x70B9;3&#x4E2A;&#xFF1A;Master1,Master2,Master3<br>&#x4EE3;&#x7406;&#x8282;&#x70B9;&#x81F3;&#x5C11;1&#x4E2A;&#xFF1A;Agent1,Agent&#x2026;&#x2026;</p>
<p>&#x5404;&#x8282;&#x70B9;&#x5BF9;&#x5E94;&#x7684;Mac&#x5730;&#x5740;&#x548C;IP&#x53EF;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x5F15;&#x5BFC;&#x8282;&#x70B9;&#xFF08;Bootstrap node&#xFF09;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">08002743B8D0 08-00-27-43-B8-D0 192.168.1.70</div></pre></td></tr></table></figure></p>
<p>&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#xFF08;Cluster nodes&#xFF09;&#x7684;&#x4E3B;&#x8282;&#x70B9;&#xFF08;Master nodes&#xFF09;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">08002743B8D1 08-00-27-43-B8-D1 192.168.1.71</div><div class="line">08002743B8D2 08-00-27-43-B8-D2 192.168.1.72</div><div class="line">08002743B8D3 08-00-27-43-B8-D3 192.168.1.73</div></pre></td></tr></table></figure></p>
<p>&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#xFF08;Cluster nodes&#xFF09;&#x7684;&#x4EE3;&#x7406;&#x8282;&#x70B9;&#xFF08;Agent nodes&#xFF09;&#xFF0C;&#x53EF;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x6A21;&#x62DF;&#x4E00;&#x4E2A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">08002743B8D4 08-00-27-43-B8-D4 192.168.1.74</div></pre></td></tr></table></figure></p>
<p>MAC&#x5907;&#x7528;&#xFF0C;&#x6A21;&#x62DF;&#x6DFB;&#x52A0;&#x4EE3;&#x7406;&#x8282;&#x70B9;&#x7528;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">08002743B8D5 08-00-27-43-B8-D5 192.168.1.75</div><div class="line">08002743B8D6 08-00-27-43-B8-D6 192.168.1.76</div><div class="line">08002743B8D7 08-00-27-43-B8-D7 192.168.1.77</div><div class="line">08002743B8D8 08-00-27-43-B8-D8 192.168.1.78</div><div class="line">08002743B8D9 08-00-27-43-B8-D9 192.168.1.79</div><div class="line">08002743B8DA 08-00-27-43-B8-DA 192.168.1.80</div></pre></td></tr></table></figure></p>
<p>&#x6CE8;&#x610F;&#xFF1A;<br>&#x7F51;&#x7EDC;&#x8BBE;&#x7F6E;&#x4E3A;&#x6865;&#x63A5;&#xFF0C;&#x8981;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;Mac&#x5730;&#x5740;&#x3002;VirtualBox&#x7684;&#x8BBE;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;Settings-Network-Attached to: &#x9009;&#x62E9;Bridged Adapter-Advanced&#x7684;Mac Address&#x586B;&#x5165;&#x4E0B;&#x8FB9;&#x7684;Mac&#x5730;&#x5740;&#xFF08;&#x6CA1;&#x6709;&#x6A2A;&#x6746;&#x7684;&#xFF09;&#x3002;</p>
<p>&#x5EFA;&#x8BAE;&#xFF1A;<br>&#x5728;&#x8DEF;&#x7531;&#x5668;&#x4E2D;&#x8BBE;&#x7F6E;&#x7ED1;&#x5B9A;&#x9759;&#x6001;&#x5730;&#x5740;&#xFF0C;&#x7528;Mac&#xFF08;&#x6709;&#x6A2A;&#x6746;&#x7684;&#xFF0C;&#x6709;&#x7684;&#x8DEF;&#x7531;&#x5668;&#x9700;&#x8981;&#x5C06;&#x6A2A;&#x6746;&#x6539;&#x4E3A;&#x534A;&#x89D2;&#x5192;&#x53F7;(:)&#xFF09;&#x6307;&#x5B9A;IP&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x7ED9;&#x6BCF;&#x4E2A;&#x4E3B;&#x673A;&#x8BBE;&#x7F6E;hostname&#xFF0C;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">hostnamectl set-hostname node-0 &amp;&amp; reboot</div><div class="line">hostnamectl set-hostname node-1 &amp;&amp; reboot</div><div class="line">hostnamectl set-hostname node-2 &amp;&amp; reboot</div><div class="line">hostnamectl set-hostname node-3 &amp;&amp; reboot</div><div class="line">hostnamectl set-hostname node-4 &amp;&amp; reboot</div></pre></td></tr></table></figure></p>
<h1 id="&#x5B89;&#x88C5;-1"><a href="#&#x5B89;&#x88C5;-1" class="headerlink" title="&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;</h1><p>&#x4EE5;&#x4E0B;&#x5B89;&#x88C5;&#x65B9;&#x5F0F;2&#x9009;1&#xFF0C;&#x63A8;&#x8350;&#x7528;CLI&#x65B9;&#x5F0F;</p>
<h3 id="&#x5C06;&#x4E0B;&#x8F7D;&#x597D;&#x7684;dcos-generate-config-sh&#x590D;&#x5236;&#x5230;&#x5F15;&#x5BFC;&#x8282;&#x70B9;"><a href="#&#x5C06;&#x4E0B;&#x8F7D;&#x597D;&#x7684;dcos-generate-config-sh&#x590D;&#x5236;&#x5230;&#x5F15;&#x5BFC;&#x8282;&#x70B9;" class="headerlink" title="&#x5C06;&#x4E0B;&#x8F7D;&#x597D;&#x7684;dcos_generate_config.sh&#x590D;&#x5236;&#x5230;&#x5F15;&#x5BFC;&#x8282;&#x70B9;"></a>&#x5C06;&#x4E0B;&#x8F7D;&#x597D;&#x7684;dcos_generate_config.sh&#x590D;&#x5236;&#x5230;&#x5F15;&#x5BFC;&#x8282;&#x70B9;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp dcos_generate_config.sh root@192.168.1.70:~/</div></pre></td></tr></table></figure>
<h3 id="&#x767B;&#x5F55;&#x5F15;&#x5BFC;&#x8282;&#x70B9;"><a href="#&#x767B;&#x5F55;&#x5F15;&#x5BFC;&#x8282;&#x70B9;" class="headerlink" title="&#x767B;&#x5F55;&#x5F15;&#x5BFC;&#x8282;&#x70B9;"></a>&#x767B;&#x5F55;&#x5F15;&#x5BFC;&#x8282;&#x70B9;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh root@192.168.1.70</div></pre></td></tr></table></figure>
<h2 id="&#x7528;CLI&#x65B9;&#x5F0F;&#x5B89;&#x88C5;"><a href="#&#x7528;CLI&#x65B9;&#x5F0F;&#x5B89;&#x88C5;" class="headerlink" title="&#x7528;CLI&#x65B9;&#x5F0F;&#x5B89;&#x88C5;"></a>&#x7528;CLI&#x65B9;&#x5F0F;&#x5B89;&#x88C5;</h2><h3 id="&#x521B;&#x5EFA;genconf&#x76EE;&#x5F55;"><a href="#&#x521B;&#x5EFA;genconf&#x76EE;&#x5F55;" class="headerlink" title="&#x521B;&#x5EFA;genconf&#x76EE;&#x5F55;"></a>&#x521B;&#x5EFA;genconf&#x76EE;&#x5F55;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir -p ~/genconf</div></pre></td></tr></table></figure>
<h3 id="&#x521B;&#x5EFA;ip-detect-sh&#x811A;&#x672C;&#xFF0C;&#x7528;&#x4E8E;&#x63A2;&#x6D4B;ip"><a href="#&#x521B;&#x5EFA;ip-detect-sh&#x811A;&#x672C;&#xFF0C;&#x7528;&#x4E8E;&#x63A2;&#x6D4B;ip" class="headerlink" title="&#x521B;&#x5EFA;ip-detect.sh&#x811A;&#x672C;&#xFF0C;&#x7528;&#x4E8E;&#x63A2;&#x6D4B;ip"></a>&#x521B;&#x5EFA;ip-detect.sh&#x811A;&#x672C;&#xFF0C;&#x7528;&#x4E8E;&#x63A2;&#x6D4B;ip</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">ip addr show #&#x5173;&#x952E;&#xFF1A;&#x5148;&#x8FD0;&#x884C;&#x8BE5;&#x547D;&#x4EE4;&#xFF0C;&#x770B;&#x662F;&#x54EA;&#x5F20;&#x7F51;&#x5361;&#x83B7;&#x53D6;&#x5230;&#x4E86;192.168.1.x&#x7684;ip&#xFF0C;&#x8BB0;&#x4F4F;&#x7F51;&#x5361;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4E00;&#x822C;&#x662F;enp0s3&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5176;&#x4ED6;&#x503C;&#x7684;&#x8BDD;&#xFF08;&#x6BD4;&#x5982;eth0&#xFF09;&#xFF0C;&#x66FF;&#x6362;&#x6389;&#x4E0B;&#x9762;&#x7684;enp0s3&#x4E3A;&#x5176;&#x4ED6;&#x503C;&#xFF08;&#x6BD4;&#x5982;eth0&#xFF09;&#x3002;</div><div class="line"></div><div class="line">sudo tee genconf/ip-detect &lt;&lt;-&apos;EOF&apos;</div><div class="line">#!/usr/bin/env bash</div><div class="line">set -o nounset -o errexit</div><div class="line">export PATH=/usr/sbin:/usr/bin:$PATH</div><div class="line">echo $(ip addr show enp0s3 | grep -Eo &apos;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&apos; | head -1)</div><div class="line">```#&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x884C;&#x4E2D;&#x7684;enp0s3&#x8981;&#x6839;&#x636E;ip addr show&#x663E;&#x793A;&#x7684;&#x7ED3;&#x679C;&#x800C;&#x5B9A;&#xFF0C;&#x6709;&#x7684;&#x662F;eth0</div><div class="line">EOF</div></pre></td></tr></table></figure>
<h3 id="&#x521B;&#x5EFA;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#&#x521B;&#x5EFA;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="&#x521B;&#x5EFA;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>&#x521B;&#x5EFA;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">sudo tee genconf/config.yaml &lt;&lt;-&apos;EOF&apos;</div><div class="line">---</div><div class="line">agent_list:</div><div class="line">- 192.168.1.74</div><div class="line"># Use this bootstrap_url value unless you have moved the DC/OS installer assets.</div><div class="line">bootstrap_url: file:///opt/dcos_install_tmp</div><div class="line">cluster_name: DCOS</div><div class="line">master_discovery: static</div><div class="line">master_list:</div><div class="line">- 192.168.1.71</div><div class="line">- 192.168.1.72</div><div class="line">- 192.168.1.73</div><div class="line">resolvers:</div><div class="line">- 192.168.1.1</div><div class="line">- 114.114.114.114</div><div class="line">ssh_port: 22</div><div class="line">ssh_user: root</div><div class="line">EOF</div></pre></td></tr></table></figure>
<h3 id="&#x590D;&#x5236;&#x79C1;&#x94A5;"><a href="#&#x590D;&#x5236;&#x79C1;&#x94A5;" class="headerlink" title="&#x590D;&#x5236;&#x79C1;&#x94A5;"></a>&#x590D;&#x5236;&#x79C1;&#x94A5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp ~/.ssh/id_rsa genconf/ssh_key &amp;&amp; chmod 0600 genconf/ssh_key</div></pre></td></tr></table></figure>
<h3 id="&#x6B63;&#x5F0F;&#x5B89;&#x88C5;"><a href="#&#x6B63;&#x5F0F;&#x5B89;&#x88C5;" class="headerlink" title="&#x6B63;&#x5F0F;&#x5B89;&#x88C5;"></a>&#x6B63;&#x5F0F;&#x5B89;&#x88C5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sudo bash dcos_generate_config.sh --help</div><div class="line">sudo bash dcos_generate_config.sh --genconf</div><div class="line">sudo bash dcos_generate_config.sh --install-prereqs</div><div class="line">sudo bash dcos_generate_config.sh --preflight</div><div class="line">sudo bash dcos_generate_config.sh --deploy</div><div class="line">sudo bash dcos_generate_config.sh --postflight</div></pre></td></tr></table></figure>
<h3 id="&#x5907;&#x4EFD;&#x5B89;&#x88C5;&#x76EE;&#x5F55;"><a href="#&#x5907;&#x4EFD;&#x5B89;&#x88C5;&#x76EE;&#x5F55;" class="headerlink" title="&#x5907;&#x4EFD;&#x5B89;&#x88C5;&#x76EE;&#x5F55;"></a>&#x5907;&#x4EFD;&#x5B89;&#x88C5;&#x76EE;&#x5F55;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">cd genconf/serve</div><div class="line">sudo tar cf dcos-install.tar *</div><div class="line">exit</div><div class="line"></div><div class="line">scp -i root@192.168.1.70:~/genconf/serve/dcos-install.tar ~</div></pre></td></tr></table></figure>
<h2 id="&#x7528;GUI&#x65B9;&#x5F0F;&#x5B89;&#x88C5;"><a href="#&#x7528;GUI&#x65B9;&#x5F0F;&#x5B89;&#x88C5;" class="headerlink" title="&#x7528;GUI&#x65B9;&#x5F0F;&#x5B89;&#x88C5;"></a>&#x7528;GUI&#x65B9;&#x5F0F;&#x5B89;&#x88C5;</h2><p>&#x767B;&#x5F55;&#x5F15;&#x5BFC;&#x8282;&#x70B9;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ssh root@192.168.1.70</div><div class="line"></div><div class="line">ip addr show #&#x5173;&#x952E;&#xFF1A;&#x5148;&#x8FD0;&#x884C;&#x8BE5;&#x547D;&#x4EE4;&#xFF0C;&#x770B;&#x662F;&#x54EA;&#x5F20;&#x7F51;&#x5361;&#x83B7;&#x53D6;&#x5230;&#x4E86;192.168.1.x&#x7684;ip&#xFF0C;&#x8BB0;&#x4F4F;&#x7F51;&#x5361;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x4E00;&#x822C;&#x662F;enp0s3&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5176;&#x4ED6;&#x503C;&#x7684;&#x8BDD;&#xFF08;&#x6BD4;&#x5982;eth0&#xFF09;&#xFF0C;&#x66FF;&#x6362;&#x6389;&#x4E0B;&#x9762;&#x7684;enp0s3&#x4E3A;&#x5176;&#x4ED6;&#x503C;&#xFF08;&#x6BD4;&#x5982;eth0&#xFF09;&#x3002;</div><div class="line"></div><div class="line">cat ~/.ssh/id_rsa #&#x7B49;&#x4E0B;&#x7528;&#x5230;</div><div class="line"></div><div class="line">sudo bash dcos_generate_config.sh --web #&#x770B;&#x5230;Starting server (&apos;0.0.0.0&apos;, 9000)&#x5373;&#x8868;&#x793A;&#x542F;&#x52A8;&#x6210;&#x529F;</div></pre></td></tr></table></figure></p>
<p>&#x4E4B;&#x540E;&#x5230;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x7535;&#x8111;&#x4E0A;&#xFF0C;<br>&#x521B;&#x5EFA;&#x6587;&#x4EF6;ip-detect.txt&#xFF0C;&#x586B;&#x5165;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env bash</div><div class="line">set -o nounset -o errexit</div><div class="line">export PATH=/usr/sbin:/usr/bin:$PATH</div><div class="line">echo $(ip addr show enp0s3 | grep -Eo &apos;[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&apos; | head -1)</div><div class="line">```#&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x884C;&#x4E2D;&#x7684;enp0s3&#x8981;&#x6839;&#x636E;ip addr show&#x663E;&#x793A;&#x7684;&#x7ED3;&#x679C;&#x800C;&#x5B9A;&#xFF0C;&#x6709;&#x7684;&#x662F;eth0</div></pre></td></tr></table></figure></p>
<p>&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x8BBF;&#x95EE;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://192.168.1.70:9000</div></pre></td></tr></table></figure></p>
<p>&#x586B;&#x5199;&#x7684;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Master Private IP List:192.168.1.71,192.168.1.72,192.168.1.73</div><div class="line">Agent Private IP List:192.168.1.74</div><div class="line">Master Public IP:192.168.1.71</div><div class="line">SSH Username:root</div><div class="line"></div><div class="line">Private SSH Key&#xFF1A;</div><div class="line">&#x590D;&#x5236;&#x8FD0;&#x884C;&#x547D;&#x4EE4;cat ~/.ssh/id_rsa&#x663E;&#x793A;&#x7684;&#x7ED3;&#x679C;</div><div class="line"></div><div class="line">Upstream DNS Servers:192.168.1.1</div><div class="line"></div><div class="line">IP Detect Script&#xFF1A;&#x9009;&#x62E9;Custom Script&#xFF0C;&#x9009;&#x62E9;&#x521B;&#x5EFA;&#x597D;&#x7684;ip-detect.txt&#x6587;&#x4EF6;</div><div class="line"></div><div class="line">&#x70B9;&#x51FB;Run Pre-Flight&#xFF0C;&#x4E4B;&#x540E;&#x6709;&#x6309;&#x94AE;&#x7684;&#x90FD;&#x70B9;&#x51FB;&#x5373;&#x53EF;&#xFF0C;Deploy&#x8FC7;&#x7A0B;&#x4F1A;&#x6BD4;&#x8F83;&#x957F;&#x3002;</div></pre></td></tr></table></figure></p>
<p>&#x5907;&#x4EFD;&#x5F15;&#x5BFC;&#x8282;&#x70B9;&#x7684;&#x5B89;&#x88C5;&#x7A0B;&#x5E8F;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd genconf/serve</div><div class="line">sudo tar cf dcos-install.tar *</div><div class="line">exit</div></pre></td></tr></table></figure></p>
<p>&#x5230;&#x5176;&#x4ED6;&#x4E3B;&#x673A;&#x4E0A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp -i root@192.168.1.70:~/genconf/serve/dcos-install.tar ~</div></pre></td></tr></table></figure></p>
<h1 id="&#x8BBF;&#x95EE;"><a href="#&#x8BBF;&#x95EE;" class="headerlink" title="&#x8BBF;&#x95EE;"></a>&#x8BBF;&#x95EE;</h1><p>&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x8BBF;&#x95EE;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://192.168.1.71</div></pre></td></tr></table></figure></p>
<p>&#x4E4B;&#x540E;&#x70B9;&#x51FB;&#x4E09;&#x79CD;&#x8D26;&#x53F7;&#x4E2D;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x6388;&#x6743;&#xFF0C;&#x5373;&#x53EF;&#x767B;&#x5F55;&#x5230;&#x7CFB;&#x7EDF;&#x3002;<br>&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;</p>
<ol>
<li>&#x6709;&#x7684;&#x65F6;&#x5019;&#x7684;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x6388;&#x6743;&#x624D;&#x80FD;&#x767B;&#x5F55;&#x3002;</li>
<li>&#x5982;&#x679C;&#x662F;github&#x8D26;&#x53F7;&#xFF0C;&#x8BBE;&#x7F6E;&#x7684;mail&#x4E0D;&#x80FD;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#x3002;&#xFF08;&#x6211;&#x7684;&#x90AE;&#x7BB1;&#x4E2D;&#x56E0;&#x4E3A;&#x6709;&#x5927;&#x5199;&#xFF0C;&#x8FD9;&#x91CC;&#x88AB;&#x5751;&#x4E86;&#x597D;&#x4E45;&#xFF09;</li>
</ol>
<h1 id="&#x5E38;&#x89C1;&#x95EE;&#x9898;"><a href="#&#x5E38;&#x89C1;&#x95EE;&#x9898;" class="headerlink" title="&#x5E38;&#x89C1;&#x95EE;&#x9898;"></a>&#x5E38;&#x89C1;&#x95EE;&#x9898;</h1><h2 id="&#x6DFB;&#x52A0;Agent-nodes"><a href="#&#x6DFB;&#x52A0;Agent-nodes" class="headerlink" title="&#x6DFB;&#x52A0;Agent nodes"></a>&#x6DFB;&#x52A0;Agent nodes</h2><p>&#x5230;&#x5F15;&#x5BFC;&#x8282;&#x70B9;&#xFF08;Bootstrap node&#xFF09;&#x4E2D;&#xFF0C;&#x4FEE;&#x6539;genconf/config.yaml&#xFF0C;&#x6DFB;&#x52A0;&#x4EE3;&#x7406;&#x8282;&#x70B9;&#x7684;ip&#x5230;agent_list&#x4E2D;&#xFF0C;&#x6BD4;&#x5982;&#x6DFB;&#x52A0;&#x4E24;&#x4E2A;&#x8282;&#x70B9;&#x4E4B;&#x540E;&#xFF0C;&#x7531;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">agent_list:</div><div class="line">- 192.168.1.74</div></pre></td></tr></table></figure></p>
<p>&#x53D8;&#x4E3A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">agent_list:</div><div class="line">- 192.168.1.74</div><div class="line">- 192.168.1.75</div><div class="line">- 192.168.1.76</div></pre></td></tr></table></figure></p>
<p>&#x4E4B;&#x540E;&#x8FD0;&#x884C;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo bash dcos_generate_config.sh --install-prereqs</div><div class="line">sudo bash dcos_generate_config.sh --preflight</div><div class="line">sudo bash dcos_generate_config.sh --deploy</div><div class="line">sudo bash dcos_generate_config.sh --postflight</div></pre></td></tr></table></figure></p>
<p>&#x8FD0;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x6709;&#x4E00;&#x4E9B;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x6389;&#x3002;</p>

	
	
	
	
</div>
				
				

                <!-- Post Comments -->
                
    <!-- 使用多说评论 -->
    <link rel="stylesheet" href="/css/duoshuo.min.css">
<style>
    #ds-thread #ds-reset .ds-post-button{
        background-color: #0097A7 !important;
    }
    #ds-wrapper #ds-reset .ds-icons-32{
        background-color: #0097A7 !important;
    }
    #ds-reset .ds-highlight {
        color: #0097A7 !important;
    }
</style>
<div id="comments">
    <!-- 多说评论框 start -->
        <div class="ds-thread" 
            data-thread-key="2016/12/10/Install-DCOS-on-CentOS/" 
            data-url="http://www.bububupt.com/2016/12/10/Install-DCOS-on-CentOS/"
            data-title="Install DCOS on CentOS"></div>
    <!-- 多说评论框 end -->
</div>



            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    
    <!-- Prev Nav -->
    
        <a href="/2016/12/10/Ansible-python-api远程部署/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/12/08/Mysql远程连接配置/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>
        </div>
    </div>

				
				
					<!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay "></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored  sidebar-fixed-left" role="navigation">
	<div id="sidebar-main">
	    <!-- Sidebar Header -->
		<div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
    <i class="material-icons">clear_all</i>
    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/images/1.jpg" alt="Bubu's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        80231093@qq.com
        <b class="caret"></b>
    </a>
</div>

		<!-- Sidebar Navigation  -->
		<ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
			
                <li>
                    <a href="mailto:80231093@qq.com" target="_blank" title="Email Me">
						<i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    <li id="sidebar-first-li">
        <a href="/" target="_self">
            <i class="material-icons sidebar-material-icons">home</i>
             主页
        </a>
    </li>

    <!-- I'm Feeling Lucky -->
<!--
    <li class="dropdown">
        <a href="" target="_self">
            <i class="material-icons sidebar-material-icons">explore</i>
             sidebar.imlucky
        </a>
    </li>
-->

	
    <!-- Archives  -->
    <li class="dropdown">
        <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
            <i class="material-icons sidebar-material-icons">inbox</i>
             归档
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
            <li>
            <a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">10</span></a>
        </ul>
    </li>

    <!-- Divider -->
    <li class="divider"></li>


    <!-- Pages  -->
	
		<li>
			<a href="/about" title="about">
				about
			</a>
		</li>
	

    <!-- Article Numebr  -->
    <li>
        <a href="/archives">
             文章总数
             <span class="sidebar-badge">13</span>
        </a>
    </li>
</ul>

		<!-- Sidebar Divider -->
		<div class="sidebar-divider"></div>

		<!-- Sidebar Footer -->
		<!-- 
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持。 :) 
-->

<!-- Theme Material -->
<a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
	<div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		主题 - Material
		<span class="sidebar-badge badge-circle">i</span>
	</div>
</a>

<!-- Help & Support -->
<!--
<a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		sidebar.help
		<span class="mdl-button__ripple-container">
			<span class="mdl-ripple"></span>
		</span>
	</div>
</a>
-->

<!-- Feedback -->
<!--
<a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.feedback
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>
-->

<!-- Abount Theme -->
<!--
<a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.about_theme
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>-->

	</div>
    
    <!-- Sidebar Sponsor -->
    


</aside>

				
				
				
					<!-- Footer Top Button -->
					<div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>
				
				
				<!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
	
	
		<!-- Paradox Footer Left Section -->
		<div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
    <a href="https://twitter.com/BubuHer" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.png);">
        <span class="visuallyhidden">Twitter</span>
    </button></a>
    
    
    <!-- Facebook -->
    
    
    
    <!-- Google + -->
    
    
    
    <!-- Weibo -->
    
    <a href="https://weibo.com/bububupt" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-weibo.png);">
        <span class="visuallyhidden">Weibo</span>
    </button></a>
    
    
    <!-- Instagram -->
    
    
    
    <!-- Tumblr -->
    
    
    
    <!-- Github -->
    
    <a href="https://github.com/BubuYo" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.png);">
        <span class="visuallyhidden">Github</span>
    </button></a>
    
</div>


		<!--Copyright-->
		<div id="copyright">Copyright&nbsp;©&nbsp;<script type="text/javascript">var fd = new Date();document.write(fd.getFullYear());</script>&nbsp;卜将就</div>

		<!-- Paradox Footer Right Section -->

		<!-- 
		I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright.
		It will not impact the appearance and can give developers a lot of support :)

		很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
		它不会影响美观并可以给开发者很大的支持。 :) 
		-->

		<div class="mdl-mini-footer--right-section">
			<div>
				<div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
				<div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
			</div>
		</div>
	
    
</footer>
                
				<!-- Import File -->
<script src="/js/highlight.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>






    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    <!-- 多说公共 js 代码 start -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"bububupt"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = 'https://static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
             || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <!-- 多说公共 js 代码 end -->




<!-- Swiftye -->


<!-- Local Search-->

	<script>
	var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        success: function( xmlResponse ) {
            // get the contents from search data
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length <= 0) {
                    return;
                }
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        str += "<li><a href='"+ data_url +"' class='search-result-title' target='_blank'>"+ data_title;
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out characters
                            var start = first_occur - 6;
                            var end = first_occur + 6;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 10;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substr(start, end); 
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<em class=\"search-keyword\">"+keyword+"</em>");
                            })
                            str += "<p class=\"search-result\">" + match_content +"...</p>" +"</a>";
                        }
                    }
                })
                $resultContent.innerHTML = str;
            })
        }
    })
}
</script>

	<script>
        var inputArea = document.querySelector("#search");
        var getSearchFile = function(){
            var path = "search.xml";
            searchFunc(path, 'search', 'local-search-result');
        }

        inputArea.onfocus = function(){ getSearchFile() }
	</script>


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $(".post-toc-wrap").parent(".mdl-menu__container").css("position", "fixed");
    });
</script>

<!-- MathJax Load-->

            </main>
        </div>
		
    </body>
		
	
</html>
